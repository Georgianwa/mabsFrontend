<%- include('partials/header') %>

<main class="homepage">
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1>Welcome to Mabs Electronics Limited</h1>
                <p>We have the widest selection of electronic appliances for your household and industrial needs!</p>
                <p>Use the navigation bar to explore our offerings</p>
                <a href="/categories" class="btn btn-primary">Shop Now</a>
            </div>
        </div>
    </section>
    
    <!-- Promotional Banners -->
    <section class="promo-banners">
        <div class="container">
            <div class="promo-grid">
                <div class="promo-card">
                    <i class="fas fa-shipping-fast"></i>
                    <h3>Free Shipping</h3>
                    <p>On orders over ₦50,000</p>
                </div>
                <div class="promo-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Warranty Protection</h3>
                    <p>Extended warranty available</p>
                </div>
                <div class="promo-card">
                    <i class="fas fa-headset"></i>
                    <h3>24/7 Support</h3>
                    <p>Always here to help</p>
                </div>
                <div class="promo-card">
                    <i class="fas fa-undo"></i>
                    <h3>Easy Returns</h3>
                    <p>30-day return policy</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Featured Products -->
    <section class="featured-products">
        <div class="container">
            <div class="section-header">
                <h2>Featured Products</h2>
                <p>Check out our best-selling items</p>
            </div>
            
            <% if (featuredProducts && featuredProducts.length > 0) { %>
                <div class="products-grid">
                    <% featuredProducts.forEach(product => { 
                        // Extract image URL safely
                        let imageUrl = '';
                        if (product.images) {
                            if (Array.isArray(product.images) && product.images.length > 0) {
                                imageUrl = product.images[0];
                            } else if (typeof product.images === 'string') {
                                imageUrl = product.images;
                            }
                        }
                    %>
                        <div class="product-card">
                            <div class="product-image">
                                <a href="/product/<%= product._id || product.id %>">
                                    <img src="<%= imageUrl || '/images/placeholder.jpg' %>" 
                                         alt="<%= product.name %>"
                                         onerror="this.src='/images/placeholder.jpg'">
                                </a>
                                <span class="badge">Featured</span>
                            </div>
                            <div class="product-info">
                                <p class="product-brand"><%= product.brand?.name || product.brand %></p>
                                <h3 class="product-name">
                                    <a href="/product/<%= product._id || product.id %>"><%= product.name %></a>
                                </h3>
                                <p class="product-price">₦<%= product.price ? product.price.toLocaleString('en-NG', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : '0.00' %></p>
                                <a href="/product/<%= product._id || product.id %>" class="btn btn-outline">View Details</a>
                            </div>
                        </div>
                    <% }); %>
                </div>
            <% } else { %>
                <p class="text-center">No featured products available at the moment.</p>
            <% } %>
        </div>
    </section>
    
    <!-- Category Highlights -->
    <section class="category-highlights">
        <div class="container">
            <div class="section-header">
                <h2>Shop by Category</h2>
                <p>Browse our extensive collection</p>
            </div>
            
            <% if (categories && categories.length > 0) { %>
                <div class="category-grid">
                    <% categories.forEach(category => { 
                        // Extract image URL safely
                        let catImageUrl = '';
                        if (category.image) {
                            if (typeof category.image === 'object' && category.image.url) {
                                catImageUrl = category.image.url;
                            } else if (typeof category.image === 'string') {
                                catImageUrl = category.image;
                            }
                        }
                    %>
                        <div class="category-card">
                            <a href="/category/<%= category._id || category.id %>">
                                <img src="<%= catImageUrl || '/images/placeholder.jpg' %>" 
                                     alt="<%= category.title || category.name %>"
                                     onerror="this.src='/images/placeholder.jpg'">
                                <div class="category-overlay">
                                    <h3><%= category.title || category.name %></h3>
                                    <p><%= category.description || 'Explore our selection' %></p>
                                </div>
                            </a>
                        </div>
                    <% }); %>
                </div>
            <% } %>
        </div>
    </section>
    
    <!-- Brand Showcase -->
    <section class="brands-showcase">
        <div class="container">
            <div class="section-header">
                <h2>Top Brands</h2>
                <p>Trusted brands, quality products</p>
            </div>
            
            <% if (brands && brands.length > 0) { %>
                <div class="brands-grid">
                    <% brands.forEach(brand => { 
                        // Extract logo URL safely
                        let logoUrl = '';
                        if (brand.image) {
                            if (typeof brand.image === 'object' && brand.image.url) {
                                logoUrl = brand.image.url;
                            } else if (typeof brand.image === 'string') {
                                logoUrl = brand.image
                            }
                        } else if (brand.logo) {
                            if (typeof brand.logo === 'object' && brand.logo.url) {
                                logoUrl = brand.logo.url;
                            } else if (typeof brand.logo === 'string') {
                                logoUrl = brand.logo;
                            }
                        }
                    %>
                        <div class="brand-card">
                            <img src="<%= logoUrl || '/images/placeholder.jpg' %>" 
                                 alt="<%= brand.name %>"
                                 onerror="this.style.display='none'">
                        </div>
                    <% }); %>
                </div>
                
                <div class="text-center">
                    <a href="/brands" class="btn btn-secondary">View All Brands</a>
                </div>
            <% } %>
        </div>
    </section>
</main>

<%- include('partials/footer') %>   